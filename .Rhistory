library(devtools)
library(usethis)
use_package_doc()
document()
use_rcpp()
document()
use_rcpp_armadillo()
document()
library(BFMediate)
#install.packages("/Users/AArash/Dropbox/Work/Mediation/package/trial123",    #BFMediate", repos = NULL, type = "source")
#library(BFMediate)  # library(BFMediate)
############################
####### PartialMed #########
############################
library(foreign)
R = 5000
#Kleiman et al. (2016)    pvalue = 0.028
Kleiman_Data  = read.spss("C:/Users/jaspe/Google Drive/Frankfurt PhD Economics/Work/Otter job/Arashtrial/Kleiman et al. (Study 4).sav",to.data.frame=TRUE)
Kleiman_Data_clean = NULL
Kleiman_Data_clean = Kleiman_Data[which((Kleiman_Data$C_party=='Democratic')&(Kleiman_Data$B_party=='Republican')),]
Kleiman_Data_clean = Kleiman_Data_clean[which(Kleiman_Data_clean$Check_pass==1),]
Kleiman_Data_clean = Kleiman_Data_clean[which((Kleiman_Data_clean$Fluency=='4')|(Kleiman_Data_clean$Fluency=='5 (Very fluent)')),]
Kleiman_Data_clean = Kleiman_Data_clean[-183,] # In order to get closer estimates to the paper in the linear regressions don't run this line
Data=NULL
Data$X = ifelse(Kleiman_Data_clean$Condition=="Congruent",-1,1)
Data$M = Kleiman_Data_clean$Atypical_composite_all
Data$Y = Kleiman_Data_clean$Ideology_difference
#m_star
Vehicle= cbind(Kleiman_Data_clean$V_Tractor,Kleiman_Data_clean$V_Feet,Kleiman_Data_clean$V_Ice_Skat,Kleiman_Data_clean$V_Sled,Kleiman_Data_clean$V_Tank,Kleiman_Data_clean$V_Wheelbar)
avg_Vehicle=rowMeans(Vehicle)
Furniture = cbind(Kleiman_Data_clean$F_Cushion,Kleiman_Data_clean$F_Fridge,Kleiman_Data_clean$F_Stove,Kleiman_Data_clean$F_Fan,Kleiman_Data_clean$F_Phone,Kleiman_Data_clean$F_Picture)
avg_Furniture=rowMeans(Furniture)
Clothing=cbind(Kleiman_Data_clean$C_Purse,Kleiman_Data_clean$C_Watch,Kleiman_Data_clean$C_Necklace,Kleiman_Data_clean$C_Ring,Kleiman_Data_clean$C_Glasses,Kleiman_Data_clean$C_Bracelet)
avg_Clothing=rowMeans(Clothing)
Data$m_star = cbind(avg_Vehicle,avg_Furniture,avg_Clothing)
# Data$m_star = cbind(Vehicle,Furniture,Clothing)  #using all the indicators
#y_star
Data$y_star = cbind(Kleiman_Data_clean$B_ideology,Kleiman_Data_clean$B_economic,Kleiman_Data_clean$B_social) - cbind(Kleiman_Data_clean$C_ideology,Kleiman_Data_clean$C_economic,Kleiman_Data_clean$C_social)
temp = Data$m_star[,1] ; Data$m_star[,1] = Data$m_star[,3]; Data$m_star[,3] = temp   #changing the order of m_stars
A_M = c(10,10);
A_Y = c(10,10,1)
Kleiman_out_simple = PartialMed(Data = Data, R=R,pars = list(A_M=1/(A_M^2),A_Y=1/(A_Y^2)))
############################
########## BFSD ############
############################
Kleiman_BF_simple = exp(BFSD(Data = Data, post = Kleiman_out_simple , model = 'cont', prior = list(A=1/(A_Y[3])^2),burnin = 0))
#install.packages("/Users/AArash/Dropbox/Work/Mediation/package/trial123",    #BFMediate", repos = NULL, type = "source")
#library(BFMediate)  # library(BFMediate)
############################
####### PartialMed #########
############################
library(foreign)
R = 5000
#Kleiman et al. (2016)    pvalue = 0.028
Kleiman_Data  = read.spss("C:/Users/jaspe/Google Drive/Frankfurt PhD Economics/Work/Otter job/Arashtrial/Kleiman et al. (Study 4).sav",to.data.frame=TRUE)
Kleiman_Data_clean = NULL
Kleiman_Data_clean = Kleiman_Data[which((Kleiman_Data$C_party=='Democratic')&(Kleiman_Data$B_party=='Republican')),]
Kleiman_Data_clean = Kleiman_Data_clean[which(Kleiman_Data_clean$Check_pass==1),]
Kleiman_Data_clean = Kleiman_Data_clean[which((Kleiman_Data_clean$Fluency=='4')|(Kleiman_Data_clean$Fluency=='5 (Very fluent)')),]
Kleiman_Data_clean = Kleiman_Data_clean[-183,] # In order to get closer estimates to the paper in the linear regressions don't run this line
Data=NULL
Data$X = ifelse(Kleiman_Data_clean$Condition=="Congruent",-1,1)
Data$M = Kleiman_Data_clean$Atypical_composite_all
Data$Y = Kleiman_Data_clean$Ideology_difference
#m_star
Vehicle= cbind(Kleiman_Data_clean$V_Tractor,Kleiman_Data_clean$V_Feet,Kleiman_Data_clean$V_Ice_Skat,Kleiman_Data_clean$V_Sled,Kleiman_Data_clean$V_Tank,Kleiman_Data_clean$V_Wheelbar)
avg_Vehicle=rowMeans(Vehicle)
Furniture = cbind(Kleiman_Data_clean$F_Cushion,Kleiman_Data_clean$F_Fridge,Kleiman_Data_clean$F_Stove,Kleiman_Data_clean$F_Fan,Kleiman_Data_clean$F_Phone,Kleiman_Data_clean$F_Picture)
avg_Furniture=rowMeans(Furniture)
Clothing=cbind(Kleiman_Data_clean$C_Purse,Kleiman_Data_clean$C_Watch,Kleiman_Data_clean$C_Necklace,Kleiman_Data_clean$C_Ring,Kleiman_Data_clean$C_Glasses,Kleiman_Data_clean$C_Bracelet)
avg_Clothing=rowMeans(Clothing)
Data$m_star = cbind(avg_Vehicle,avg_Furniture,avg_Clothing)
# Data$m_star = cbind(Vehicle,Furniture,Clothing)  #using all the indicators
#y_star
Data$y_star = cbind(Kleiman_Data_clean$B_ideology,Kleiman_Data_clean$B_economic,Kleiman_Data_clean$B_social) - cbind(Kleiman_Data_clean$C_ideology,Kleiman_Data_clean$C_economic,Kleiman_Data_clean$C_social)
temp = Data$m_star[,1] ; Data$m_star[,1] = Data$m_star[,3]; Data$m_star[,3] = temp   #changing the order of m_stars
A_M = c(10,10);
A_Y = c(10,10,1)
Kleiman_out_simple = PartialMed(Data = Data, R=R,pars = list(A_M=1/(A_M^2),A_Y=1/(A_Y^2)))
#install.packages("/Users/AArash/Dropbox/Work/Mediation/package/trial123",    #BFMediate", repos = NULL, type = "source")
#library(BFMediate)  # library(BFMediate)
############################
####### PartialMed #########
############################
library(foreign)
R = 5000
#Kleiman et al. (2016)    pvalue = 0.028
Kleiman_Data  = read.spss("C:/Users/jaspe/Google Drive/Frankfurt PhD Economics/Work/Otter job/Arashtrial/Kleiman et al. (Study 4).sav",to.data.frame=TRUE)
Kleiman_Data_clean = NULL
Kleiman_Data_clean = Kleiman_Data[which((Kleiman_Data$C_party=='Democratic')&(Kleiman_Data$B_party=='Republican')),]
Kleiman_Data_clean = Kleiman_Data_clean[which(Kleiman_Data_clean$Check_pass==1),]
Kleiman_Data_clean = Kleiman_Data_clean[which((Kleiman_Data_clean$Fluency=='4')|(Kleiman_Data_clean$Fluency=='5 (Very fluent)')),]
Kleiman_Data_clean = Kleiman_Data_clean[-183,] # In order to get closer estimates to the paper in the linear regressions don't run this line
Data=NULL
Data$X = ifelse(Kleiman_Data_clean$Condition=="Congruent",-1,1)
Data$M = Kleiman_Data_clean$Atypical_composite_all
Data$Y = Kleiman_Data_clean$Ideology_difference
#m_star
Vehicle= cbind(Kleiman_Data_clean$V_Tractor,Kleiman_Data_clean$V_Feet,Kleiman_Data_clean$V_Ice_Skat,Kleiman_Data_clean$V_Sled,Kleiman_Data_clean$V_Tank,Kleiman_Data_clean$V_Wheelbar)
avg_Vehicle=rowMeans(Vehicle)
Furniture = cbind(Kleiman_Data_clean$F_Cushion,Kleiman_Data_clean$F_Fridge,Kleiman_Data_clean$F_Stove,Kleiman_Data_clean$F_Fan,Kleiman_Data_clean$F_Phone,Kleiman_Data_clean$F_Picture)
avg_Furniture=rowMeans(Furniture)
Clothing=cbind(Kleiman_Data_clean$C_Purse,Kleiman_Data_clean$C_Watch,Kleiman_Data_clean$C_Necklace,Kleiman_Data_clean$C_Ring,Kleiman_Data_clean$C_Glasses,Kleiman_Data_clean$C_Bracelet)
avg_Clothing=rowMeans(Clothing)
Data$m_star = cbind(avg_Vehicle,avg_Furniture,avg_Clothing)
# Data$m_star = cbind(Vehicle,Furniture,Clothing)  #using all the indicators
#y_star
Data$y_star = cbind(Kleiman_Data_clean$B_ideology,Kleiman_Data_clean$B_economic,Kleiman_Data_clean$B_social) - cbind(Kleiman_Data_clean$C_ideology,Kleiman_Data_clean$C_economic,Kleiman_Data_clean$C_social)
temp = Data$m_star[,1] ; Data$m_star[,1] = Data$m_star[,3]; Data$m_star[,3] = temp   #changing the order of m_stars
A_M = c(10,10);
A_Y = c(10,10,1)
Kleiman_out_simple = PartialMed(Data = Data, R=R,pars = list(A_M=1/(A_M^2),A_Y=1/(A_Y^2)))
############################
########## BFSD ############
############################
Kleiman_BF_simple = exp(BFSD(Data = Data, post = Kleiman_out_simple , model = 'cont', prior = list(A=1/(A_Y[3])^2),burnin = 0))
#install.packages("/Users/AArash/Dropbox/Work/Mediation/package/trial123",    #BFMediate", repos = NULL, type = "source")
#library(BFMediate)  # library(BFMediate)
############################
####### PartialMed #########
############################
library(foreign)
R = 5000
#Kleiman et al. (2016)    pvalue = 0.028
Kleiman_Data  = read.spss("C:/Users/jaspe/Google Drive/Frankfurt PhD Economics/Work/Otter job/Arashtrial/Kleiman et al. (Study 4).sav",to.data.frame=TRUE)
Kleiman_Data_clean = NULL
Kleiman_Data_clean = Kleiman_Data[which((Kleiman_Data$C_party=='Democratic')&(Kleiman_Data$B_party=='Republican')),]
Kleiman_Data_clean = Kleiman_Data_clean[which(Kleiman_Data_clean$Check_pass==1),]
Kleiman_Data_clean = Kleiman_Data_clean[which((Kleiman_Data_clean$Fluency=='4')|(Kleiman_Data_clean$Fluency=='5 (Very fluent)')),]
Kleiman_Data_clean = Kleiman_Data_clean[-183,] # In order to get closer estimates to the paper in the linear regressions don't run this line
Data=NULL
Data$X = ifelse(Kleiman_Data_clean$Condition=="Congruent",-1,1)
Data$M = Kleiman_Data_clean$Atypical_composite_all
Data$Y = Kleiman_Data_clean$Ideology_difference
#m_star
Vehicle= cbind(Kleiman_Data_clean$V_Tractor,Kleiman_Data_clean$V_Feet,Kleiman_Data_clean$V_Ice_Skat,Kleiman_Data_clean$V_Sled,Kleiman_Data_clean$V_Tank,Kleiman_Data_clean$V_Wheelbar)
avg_Vehicle=rowMeans(Vehicle)
Furniture = cbind(Kleiman_Data_clean$F_Cushion,Kleiman_Data_clean$F_Fridge,Kleiman_Data_clean$F_Stove,Kleiman_Data_clean$F_Fan,Kleiman_Data_clean$F_Phone,Kleiman_Data_clean$F_Picture)
avg_Furniture=rowMeans(Furniture)
Clothing=cbind(Kleiman_Data_clean$C_Purse,Kleiman_Data_clean$C_Watch,Kleiman_Data_clean$C_Necklace,Kleiman_Data_clean$C_Ring,Kleiman_Data_clean$C_Glasses,Kleiman_Data_clean$C_Bracelet)
avg_Clothing=rowMeans(Clothing)
Data$m_star = cbind(avg_Vehicle,avg_Furniture,avg_Clothing)
# Data$m_star = cbind(Vehicle,Furniture,Clothing)  #using all the indicators
#y_star
Data$y_star = cbind(Kleiman_Data_clean$B_ideology,Kleiman_Data_clean$B_economic,Kleiman_Data_clean$B_social) - cbind(Kleiman_Data_clean$C_ideology,Kleiman_Data_clean$C_economic,Kleiman_Data_clean$C_social)
temp = Data$m_star[,1] ; Data$m_star[,1] = Data$m_star[,3]; Data$m_star[,3] = temp   #changing the order of m_stars
A_M = c(10,10);
A_Y = c(10,10,1)
Kleiman_out_simple = PartialMed(Data = Data, R=R,pars = list(A_M=1/(A_M^2),A_Y=1/(A_Y^2)))
document()
devtools::load_all(".")
#install.packages("/Users/AArash/Dropbox/Work/Mediation/package/trial123",    #BFMediate", repos = NULL, type = "source")
#library(BFMediate)  # library(BFMediate)
############################
####### PartialMed #########
############################
library(foreign)
R = 5000
#Kleiman et al. (2016)    pvalue = 0.028
Kleiman_Data  = read.spss("C:/Users/jaspe/Google Drive/Frankfurt PhD Economics/Work/Otter job/Arashtrial/Kleiman et al. (Study 4).sav",to.data.frame=TRUE)
Kleiman_Data_clean = NULL
Kleiman_Data_clean = Kleiman_Data[which((Kleiman_Data$C_party=='Democratic')&(Kleiman_Data$B_party=='Republican')),]
Kleiman_Data_clean = Kleiman_Data_clean[which(Kleiman_Data_clean$Check_pass==1),]
Kleiman_Data_clean = Kleiman_Data_clean[which((Kleiman_Data_clean$Fluency=='4')|(Kleiman_Data_clean$Fluency=='5 (Very fluent)')),]
Kleiman_Data_clean = Kleiman_Data_clean[-183,] # In order to get closer estimates to the paper in the linear regressions don't run this line
Data=NULL
Data$X = ifelse(Kleiman_Data_clean$Condition=="Congruent",-1,1)
Data$M = Kleiman_Data_clean$Atypical_composite_all
Data$Y = Kleiman_Data_clean$Ideology_difference
#m_star
Vehicle= cbind(Kleiman_Data_clean$V_Tractor,Kleiman_Data_clean$V_Feet,Kleiman_Data_clean$V_Ice_Skat,Kleiman_Data_clean$V_Sled,Kleiman_Data_clean$V_Tank,Kleiman_Data_clean$V_Wheelbar)
avg_Vehicle=rowMeans(Vehicle)
Furniture = cbind(Kleiman_Data_clean$F_Cushion,Kleiman_Data_clean$F_Fridge,Kleiman_Data_clean$F_Stove,Kleiman_Data_clean$F_Fan,Kleiman_Data_clean$F_Phone,Kleiman_Data_clean$F_Picture)
avg_Furniture=rowMeans(Furniture)
Clothing=cbind(Kleiman_Data_clean$C_Purse,Kleiman_Data_clean$C_Watch,Kleiman_Data_clean$C_Necklace,Kleiman_Data_clean$C_Ring,Kleiman_Data_clean$C_Glasses,Kleiman_Data_clean$C_Bracelet)
avg_Clothing=rowMeans(Clothing)
Data$m_star = cbind(avg_Vehicle,avg_Furniture,avg_Clothing)
# Data$m_star = cbind(Vehicle,Furniture,Clothing)  #using all the indicators
#y_star
Data$y_star = cbind(Kleiman_Data_clean$B_ideology,Kleiman_Data_clean$B_economic,Kleiman_Data_clean$B_social) - cbind(Kleiman_Data_clean$C_ideology,Kleiman_Data_clean$C_economic,Kleiman_Data_clean$C_social)
temp = Data$m_star[,1] ; Data$m_star[,1] = Data$m_star[,3]; Data$m_star[,3] = temp   #changing the order of m_stars
A_M = c(10,10);
A_Y = c(10,10,1)
Kleiman_out_simple = PartialMed(Data = Data, R=R,pars = list(A_M=1/(A_M^2),A_Y=1/(A_Y^2)))
############################
########## BFSD ############
############################
Kleiman_BF_simple = exp(BFSD(Data = Data, post = Kleiman_out_simple , model = 'cont', prior = list(A=1/(A_Y[3])^2),burnin = 0))
library(Rcpp)
library(RcppArmadillo)
remove.packages("BFMediate", lib="~/R/win-library/3.6")
library(BFMediate)
#install.packages("/Users/AArash/Dropbox/Work/Mediation/package/trial123",    #BFMediate", repos = NULL, type = "source")
#library(BFMediate)  # library(BFMediate)
############################
####### PartialMed #########
############################
library(foreign)
R = 5000
#Kleiman et al. (2016)    pvalue = 0.028
Kleiman_Data  = read.spss("C:/Users/jaspe/Google Drive/Frankfurt PhD Economics/Work/Otter job/Arashtrial/Kleiman et al. (Study 4).sav",to.data.frame=TRUE)
Kleiman_Data_clean = NULL
Kleiman_Data_clean = Kleiman_Data[which((Kleiman_Data$C_party=='Democratic')&(Kleiman_Data$B_party=='Republican')),]
Kleiman_Data_clean = Kleiman_Data_clean[which(Kleiman_Data_clean$Check_pass==1),]
Kleiman_Data_clean = Kleiman_Data_clean[which((Kleiman_Data_clean$Fluency=='4')|(Kleiman_Data_clean$Fluency=='5 (Very fluent)')),]
Kleiman_Data_clean = Kleiman_Data_clean[-183,] # In order to get closer estimates to the paper in the linear regressions don't run this line
Data=NULL
Data$X = ifelse(Kleiman_Data_clean$Condition=="Congruent",-1,1)
Data$M = Kleiman_Data_clean$Atypical_composite_all
Data$Y = Kleiman_Data_clean$Ideology_difference
#m_star
Vehicle= cbind(Kleiman_Data_clean$V_Tractor,Kleiman_Data_clean$V_Feet,Kleiman_Data_clean$V_Ice_Skat,Kleiman_Data_clean$V_Sled,Kleiman_Data_clean$V_Tank,Kleiman_Data_clean$V_Wheelbar)
avg_Vehicle=rowMeans(Vehicle)
Furniture = cbind(Kleiman_Data_clean$F_Cushion,Kleiman_Data_clean$F_Fridge,Kleiman_Data_clean$F_Stove,Kleiman_Data_clean$F_Fan,Kleiman_Data_clean$F_Phone,Kleiman_Data_clean$F_Picture)
avg_Furniture=rowMeans(Furniture)
Clothing=cbind(Kleiman_Data_clean$C_Purse,Kleiman_Data_clean$C_Watch,Kleiman_Data_clean$C_Necklace,Kleiman_Data_clean$C_Ring,Kleiman_Data_clean$C_Glasses,Kleiman_Data_clean$C_Bracelet)
avg_Clothing=rowMeans(Clothing)
Data$m_star = cbind(avg_Vehicle,avg_Furniture,avg_Clothing)
# Data$m_star = cbind(Vehicle,Furniture,Clothing)  #using all the indicators
#y_star
Data$y_star = cbind(Kleiman_Data_clean$B_ideology,Kleiman_Data_clean$B_economic,Kleiman_Data_clean$B_social) - cbind(Kleiman_Data_clean$C_ideology,Kleiman_Data_clean$C_economic,Kleiman_Data_clean$C_social)
temp = Data$m_star[,1] ; Data$m_star[,1] = Data$m_star[,3]; Data$m_star[,3] = temp   #changing the order of m_stars
A_M = c(10,10);
A_Y = c(10,10,1)
View(Kleiman_Data)
Kleiman_out_simple = PartialMed(Data = Data, R=R,pars = list(A_M=1/(A_M^2),A_Y=1/(A_Y^2)))
############################
########## BFSD ############
############################
Kleiman_BF_simple = exp(BFSD(Data = Data, post = Kleiman_out_simple , model = 'cont', prior = list(A=1/(A_Y[3])^2),burnin = 0))
Kleiman_BF_simple
library(devtools)
library(Rcpp)
library(RcppArmadillo)
